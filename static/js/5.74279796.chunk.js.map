{"version":3,"sources":["pages/DashboarLayout/Contents/Create/index.jsx"],"names":["ContentCreate","state","label","latinName","englishName","englishDescription","englishAudio","indonesianName","indonesianDescription","indonesianAudio","formSubmited","isLoading","id","en","progress","getData","props","match","params","console","log","handleFormChange","e","setState","target","name","value","handleUploadStart","lang","handleProgress","handleUploadError","error","handleUploadSuccess","filename","firebase","storage","ref","child","getDownloadURL","then","url","handleFormSubmit","firestore","collection","add","indonesian","description","audio","english","doc","history","push","catch","className","onChange","this","required","defaultValue","disabled","htmlFor","type","role","data-toggle","href","aria-controls","aria-selected","aria-labelledby","style","minHeight","accept","randomizeFilename","storageRef","onUploadStart","onUploadError","onUploadSuccess","onProgress","src","controls","onClick","Component"],"mappings":"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","file":"static/js/5.74279796.chunk.js","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport firebase from '../../../../services/firebase';\r\nimport FileUploader from 'react-firebase-file-uploader';\r\n\r\nclass ContentCreate extends Component {\r\n  state = {\r\n    label: '',\r\n    latinName: '',\r\n    englishName: '',\r\n    englishDescription: '',\r\n    englishAudio: '',\r\n    indonesianName: '',\r\n    indonesianDescription: '',\r\n    indonesianAudio: '',\r\n    formSubmited: false,\r\n    isLoading: { id: false, en: false },\r\n    progress: { id: 0, en: 0 },\r\n  };\r\n\r\n  getData = () => {\r\n    const { id } = this.props.match.params;\r\n    console.log(id);\r\n  }\r\n\r\n\r\n  handleFormChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value,\r\n    });\r\n    // console.log(this.state);\r\n  }\r\n\r\n  handleUploadStart = lang => () => {\r\n    switch (lang) {\r\n      case 'id':\r\n        this.setState(({ isLoading, progress }) => ({\r\n          isLoading: {\r\n            ...isLoading,\r\n            id: true,\r\n          },\r\n          progress: {\r\n            ...progress,\r\n            id: 0,\r\n          }\r\n        }));\r\n        break;\r\n      case 'en':\r\n        this.setState(({ isLoading, progress }) => ({\r\n          isLoading: {\r\n            ...isLoading,\r\n            en: true,\r\n          },\r\n          progress: {\r\n            ...progress,\r\n            en: 0,\r\n          }\r\n        }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n  handleProgress = lang => progress => {\r\n    switch (lang) {\r\n      case 'id':\r\n        this.setState(({ progress }) => ({\r\n          progress: {\r\n            ...progress,\r\n            id: progress.id,\r\n          }\r\n        }));\r\n        break;\r\n      case 'en':\r\n        this.setState(({ progress }) => ({\r\n          progress: {\r\n            ...progress,\r\n            en: progress.en,\r\n          }\r\n        }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  handleUploadError = lang => error => {\r\n    switch (lang) {\r\n      case 'id':\r\n        this.setState(({ isLoading }) => ({\r\n          isLoading: {\r\n            ...isLoading,\r\n            id: false,\r\n          }\r\n        }));\r\n        break;\r\n      case 'en':\r\n        this.setState(({ isLoading }) => ({\r\n          isLoading: {\r\n            ...isLoading,\r\n            en: false,\r\n          }\r\n        }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    console.error(lang, error);\r\n  };\r\n  handleUploadSuccess = lang => filename => {\r\n    switch (lang) {\r\n      case 'id':\r\n        this.setState(({ isLoading, progress }) => ({\r\n          isLoading: {\r\n            ...isLoading,\r\n            id: false,\r\n          },\r\n          progress: {\r\n            ...progress,\r\n            id: 100,\r\n          }\r\n        }));\r\n        firebase\r\n          .storage()\r\n          .ref(\"audios\")\r\n          .child(filename)\r\n          .getDownloadURL()\r\n          .then(url => this.setState({ indonesianAudio: url }));\r\n        break;\r\n      case 'en':\r\n        this.setState(({ isLoading, progress }) => ({\r\n          isLoading: {\r\n            ...isLoading,\r\n            en: false,\r\n          },\r\n          progress: {\r\n            ...progress,\r\n            en: 100,\r\n          }\r\n        }));\r\n        firebase\r\n          .storage()\r\n          .ref(\"audios\")\r\n          .child(filename)\r\n          .getDownloadURL()\r\n          .then(url => this.setState({ englishAudio: url }));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  handleFormSubmit = () => {\r\n    console.log(this.state);\r\n    this.setState({\r\n      formSubmited: true,\r\n    });\r\n    const { label, latinName, englishName, englishDescription, englishAudio, indonesianName, indonesianAudio, indonesianDescription } = this.state;\r\n\r\n    firebase.firestore().collection(\"contents\").add({\r\n      label,\r\n      latinName,\r\n      indonesian: {\r\n        name: indonesianName,\r\n        description: indonesianDescription,\r\n        audio: indonesianAudio,\r\n      },\r\n      english: {\r\n        name: englishName,\r\n        description: englishDescription,\r\n        audio: englishAudio,\r\n      },\r\n    }).then(doc => {\r\n      console.log(doc);\r\n      this.props.history.push('/content');\r\n    }).catch(error => {\r\n      this.setState({\r\n        formSubmited: false,\r\n      });\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  // componentDidMount() {\r\n  //   console.log(this.props.match.params);\r\n  // }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n        <div className=\"section-header\">\r\n          <h1>Manage Contents</h1>\r\n        </div>\r\n        <div className=\"section-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-12\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header\">\r\n                  <h4>Create Data</h4>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                  <div className=\"form-group\">\r\n                    <label>Class/Label</label>\r\n                    <select name=\"label\" id=\"\" className=\"custom-select\" onChange={this.handleFormChange} required>\r\n                      <option value=\"\" defaultValue disabled>-Choose One-</option>\r\n                      <option value=\"komodo_dragon\">Komodo Dragon</option>\r\n                      <option value=\"bird_of_paradise\">Bird Of Paradise</option>\r\n                      <option value=\"maleo\">Maleo</option>\r\n                      <option value=\"bali_myna\">Bali Myna</option>\r\n                      <option value=\"proboscis_monkey\">Proboscis Monkey</option>\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"latinName\">Latin Name</label>\r\n                    <input type=\"text\" name=\"latinName\" className=\"form-control\" onChange={this.handleFormChange} />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                      <label>Name</label>\r\n                      <ul className=\"nav nav-pills mb-3\" id=\"name-tab\" role=\"tablist\">\r\n                        <li className=\"nav-item\">\r\n                          <a className=\"nav-link active\" id=\"name-en-tab\" data-toggle=\"pill\" href=\"#name-en\" role=\"tab\" aria-controls=\"name-en\" aria-selected=\"true\">English</a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                          <a className=\"nav-link\" id=\"name-in-tab\" data-toggle=\"pill\" href=\"#name-in\" role=\"tab\" aria-controls=\"name-in\" aria-selected=\"false\">Indonesia</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className=\"tab-content\" id=\"name-tabContent\">\r\n                      <div className=\"tab-pane fade show active\" id=\"name-en\" role=\"tabpanel\" aria-labelledby=\"name-en-tab\">\r\n                        <input type=\"text\" name=\"englishName\" className=\"form-control\" onChange={this.handleFormChange} />\r\n                      </div>\r\n                      <div className=\"tab-pane fade\" id=\"name-in\" role=\"tabpanel\" aria-labelledby=\"name-in-tab\">\r\n                        <input type=\"text\" name=\"indonesianName\" className=\"form-control\" onChange={this.handleFormChange} />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                      <label>Description</label>\r\n                      <ul className=\"nav nav-pills mb-3\" id=\"desc-tab\" role=\"tablist\">\r\n                        <li className=\"nav-item\">\r\n                          <a className=\"nav-link active\" id=\"desc-en-tab\" data-toggle=\"pill\" href=\"#desc-en\" role=\"tab\" aria-controls=\"desc-en\" aria-selected=\"true\">English</a>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                          <a className=\"nav-link\" id=\"desc-in-tab\" data-toggle=\"pill\" href=\"#desc-in\" role=\"tab\" aria-controls=\"desc-in\" aria-selected=\"false\">Indonesia</a>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className=\"tab-content\" id=\"desc-tabContent\">\r\n                      <div className=\"tab-pane fade show active\" id=\"desc-en\" role=\"tabpanel\" aria-labelledby=\"desc-en-tab\">\r\n                        <textarea name=\"englishDescription\" className=\"form-control\" onChange={this.handleFormChange} style={{ minHeight: '150px' }}></textarea>\r\n                      </div>\r\n                      <div className=\"tab-pane fade\" id=\"desc-in\" role=\"tabpanel\" aria-labelledby=\"desc-in-tab\">\r\n                        <textarea name=\"indonesianDescription\" className=\"form-control\" onChange={this.handleFormChange} style={{ minHeight: '150px' }}></textarea>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Audio</label>\r\n                    <div className=\"input-group mb-3\">\r\n                      <div className=\"input-group-prepend mr-2\">\r\n                        <span className=\"input-group-text\" id=\"basic-addon3\">English</span>\r\n                      </div>\r\n                      <FileUploader\r\n                        // hidden\r\n                        accept=\"audio/*\"\r\n                        className=\"flex-grow-1\"\r\n                        name=\"englishAudio\"\r\n                        randomizeFilename\r\n                        storageRef={firebase.storage().ref('audios')}\r\n                        onUploadStart={this.handleUploadStart(\"en\")}\r\n                        onUploadError={this.handleUploadError(\"en\")}\r\n                        onUploadSuccess={this.handleUploadSuccess(\"en\")}\r\n                        onProgress={this.handleProgress(\"en\")}\r\n                      />\r\n                      <div className=\"input-group-append\">\r\n                        <audio src={this.state.englishAudio} controls></audio>\r\n                      </div>\r\n                    </div>\r\n                    {this.state.progress.en === 100 ? <span>Upload Done!</span> : ''}\r\n                    <div className=\"input-group mb-3\">\r\n                      <div className=\"input-group-prepend mr-2\">\r\n                        <span className=\"input-group-text\" id=\"basic-addon3\">Indonesia</span>\r\n                      </div>\r\n                      <FileUploader\r\n                        // hidden\r\n                        accept=\"audio/*\"\r\n                        className=\"flex-grow-1\"\r\n                        name=\"indonesianAudio\"\r\n                        randomizeFilename\r\n                        storageRef={firebase.storage().ref('audios')}\r\n                        onUploadStart={this.handleUploadStart(\"id\")}\r\n                        onUploadError={this.handleUploadError(\"id\")}\r\n                        onUploadSuccess={this.handleUploadSuccess(\"id\")}\r\n                        onProgress={this.handleProgress(\"id\")}\r\n                      />\r\n                      <div className=\"input-group-append\">\r\n                        <audio src={this.state.indonesianAudio} controls></audio>\r\n                      </div>\r\n                    </div>\r\n                    {this.state.progress.id === 100 ? <span>Upload Done!</span> : ''}\r\n                  </div>\r\n                </div>\r\n                <div className=\"card-footer text-right\">\r\n                  <button className={`btn btn-primary ${this.state.formSubmited ? 'btn-progress btn-disabled' : ''}`} type=\"submit\" onClick={this.handleFormSubmit}>Submit</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContentCreate;"],"sourceRoot":""}